<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>BlookDash | Version 30.0</title>
    <style>
        :root {
            --primary: #3498db; --dark-bg: #0b101b; --sidebar-bg: #161d2b;
            --card-bg: #1c2331; --danger: #e74c3c; --success: #2ecc71;
            --warning: #f1c40f; --chroma: #00FBFF; --epic: #a335ee; --legendary: #ff8000;
        }

        body, html { margin: 0; padding: 0; height: 100%; font-family: 'Segoe UI', sans-serif; background: var(--dark-bg); color: white; overflow: hidden; }

        #sidebar { width: 260px; background: var(--sidebar-bg); height: 100vh; display: flex; flex-direction: column; padding: 25px; border-right: 2px solid #2c3e50; float: left; box-sizing: border-box; }
        .nav-btn { background: none; border: none; color: #bdc3c7; text-align: left; padding: 14px; font-size: 16px; cursor: pointer; border-radius: 10px; margin-bottom: 8px; width: 100%; transition: 0.2s; }
        .nav-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3); }

        #main-content { margin-left: 260px; padding: 40px; height: 100vh; overflow-y: auto; box-sizing: border-box; }

        .pack-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(180px, 1fr)); gap: 20px; }
        .card { background: var(--card-bg); padding: 20px; border-radius: 15px; text-align: center; border: 2px solid #2c3e50; }
        
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 9999; align-items: center; justify-content: center; }
        input, textarea { background: #222; border: 1px solid #444; color: white; padding: 12px; border-radius: 8px; margin: 5px; width: 80%; }
        
        #console-log { background: #000; color: #0f0; font-family: 'Courier New', monospace; padding: 10px; height: 150px; overflow-y: auto; text-align: left; font-size: 12px; border-radius: 5px; margin-top: 10px; }
    </style>
</head>
<body onload="init()">

    <div id="splash" style="position:fixed; width:100%; height:100%; background:#000; z-index:1000; display:flex; flex-direction:column; align-items:center; justify-content:center;">
        <h1 style="font-size:80px; color:var(--primary);">BlookDash</h1>
        <button class="nav-btn" style="background:var(--success); color:white; width:220px; text-align:center;" onclick="document.getElementById('auth-modal').style.display='flex'">LOGIN</button>
    </div>

    <div id="auth-modal" class="modal">
        <div style="background:var(--sidebar-bg); padding:40px; border-radius:25px; border:2px solid var(--primary); text-align:center; width:350px;">
            <h2>Account Access</h2>
            <input type="text" id="user-in" placeholder="Username">
            <input type="password" id="pass-in" placeholder="Password">
            <button onclick="auth()" class="nav-btn" style="background:var(--primary); color:white; text-align:center;">Launch</button>
        </div>
    </div>

    <div id="game-ui" style="display:none;">
        <div id="sidebar">
            <h2 style="color:var(--primary);">BlookDash</h2>
            <button class="nav-btn active" onclick="tab('market', this)">üõí Market</button>
            <button class="nav-btn" onclick="tab('collection', this)">üéí Collection</button>
            <button class="nav-btn" onclick="tab('trade', this)">üîÑ Trading</button>
            <button class="nav-btn" onclick="tab('promo', this)">‚å®Ô∏è Dev Console</button>
            
            <div style="margin-top:auto;">
                <p style="font-size:12px; color:#666;">TOKENS</p>
                <b id="stat-tokens" style="color:var(--warning); font-size:24px;">0</b>
                <button onclick="location.reload()" class="nav-btn" style="background:var(--danger); color:white; margin-top:15px; text-align:center;">Logout</button>
            </div>
        </div>

        <div id="main-content">
            <div id="market" class="tab">
                <h1>Market</h1>
                <div id="pack-list" class="pack-grid"></div>
            </div>

            <div id="promo" class="tab" style="display:none; text-align:center;">
                <h1>Developer Console</h1>
                <div style="background:rgba(0,0,0,0.5); padding:25px; border-radius:15px; max-width:500px; margin:0 auto;">
                    <textarea id="console-input" placeholder="Enter Command..." rows="3"></textarea>
                    <button onclick="runCommand()" class="nav-btn" style="background:var(--primary); color:white; text-align:center;">Execute Script</button>
                    <div id="console-log">System Ready... Type commands above.</div>
                </div>
            </div>

            <div id="trade" class="tab" style="display:none;">
                <h1>Trading</h1>
                <input type="text" id="t-user" placeholder="Recipient Username">
                <input type="number" id="t-amt" placeholder="Amount">
                <button onclick="tradeTokens()" style="background:var(--success); color:white; border:none; padding:12px; border-radius:8px;">Send</button>
                <div id="trade-blook-list" class="pack-grid" style="margin-top:20px;"></div>
            </div>

            <div id="collection" class="tab">
                <h1>Collection</h1>
                <div id="inv-list" class="pack-grid"></div>
            </div>
        </div>
    </div>

    <div id="reveal-modal" class="modal">
        <div style="text-align:center;">
            <div id="reveal-img" style="font-size:150px;"></div>
            <h1 id="reveal-name"></h1>
            <h2 id="reveal-rarity"></h2>
            <button onclick="document.getElementById('reveal-modal').style.display='none'" class="nav-btn" style="background:var(--primary); color:white; width:150px; text-align:center;">OK</button>
        </div>
    </div>

    <script>
        let user = null;
        let data = { tokens: 5000n, inventory: [] };

        const packs = [
            { name: 'Medieval', icon: 'üè∞', cost: 1000n, pool: [{name:'Peasant', rarity:'Common', img:'üë®‚Äçüåæ'}, {name:'King', rarity:'Legendary', img:'üëë'}] },
            { name: 'Aquatic', icon: 'üåä', cost: 1000n, pool: [{name:'Fish', rarity:'Common', img:'üê†'}, {name:'Kraken', rarity:'Chroma', img:'üêô'}] },
            { name: 'Exclusive', icon: 'üíé', cost: 50000n, pool: [{name:'Raccooni', rarity:'Exclusive', img:'ü¶ù'}] }
        ];

        function auth() {
            const u = document.getElementById('user-in').value.trim();
            const p = document.getElementById('pass-in').value.trim();
            if(!u) return;
            const saved = localStorage.getItem('bd_usr_' + u);
            if(saved) {
                const parsed = JSON.parse(saved);
                if(parsed.pass !== p) return alert("Wrong Password");
                user = u; data.tokens = BigInt(parsed.tokens); data.inventory = parsed.inventory;
            } else { user = u; data.pass = p; save(); }
            document.getElementById('splash').style.display = 'none';
            document.getElementById('auth-modal').style.display = 'none';
            document.getElementById('game-ui').style.display = 'block';
            updateUI(); renderPacks();
        }

        function save() {
            if(!user) return;
            localStorage.setItem('bd_usr_' + user, JSON.stringify({tokens: data.tokens.toString(), inventory: data.inventory, pass: data.pass}));
        }

        function buyPack(i, amt) {
            let cost = packs[i].cost * BigInt(amt);
            if(data.tokens < cost) return;
            data.tokens -= cost;
            for(let a=0; a<amt; a++){
                let res = packs[i].pool[Math.floor(Math.random()*packs[i].pool.length)];
                data.inventory.unshift(res);
                if(amt === 1) showReveal(res);
            }
            updateUI(); save();
        }

        /* DEVELOPER COMMANDS */
        function runCommand() {
            const cmd = document.getElementById('console-input').value;
            const log = document.getElementById('console-log');
            try {
                if(cmd.startsWith("addTokens")) {
                    let amt = BigInt(cmd.match(/\d+/)[0]);
                    data.tokens += amt;
                    log.innerHTML += `<br>> Added ${amt.toLocaleString()} tokens.`;
                } else if(cmd === "unlockAll") {
                    data.inventory.push({name:'Kraken', rarity:'Chroma', img:'üêô'}, {name:'King', rarity:'Legendary', img:'üëë'});
                    log.innerHTML += `<br>> Unlocked starter rares.`;
                } else if(cmd === "clearInv") {
                    data.inventory = [];
                    log.innerHTML += `<br>> Inventory wiped.`;
                } else {
                    log.innerHTML += `<br>> Error: Command not recognized.`;
                }
                updateUI(); save();
            } catch(e) { log.innerHTML += `<br>> Syntax Error.`; }
            document.getElementById('console-input').value = "";
        }

        function renderPacks() {
            document.getElementById('pack-list').innerHTML = packs.map((p, i) => `
                <div class="card">
                    <div style="font-size:40px;">${p.icon}</div>
                    <h3>${p.name}</h3>
                    <button onclick="buyPack(${i}, 1)">Open</button>
                    <button onclick="buyPack(${i}, 10)" style="background:var(--warning)">Spam 10</button>
                </div>`).join('');
        }

        function updateUI() { document.getElementById('stat-tokens').innerText = data.tokens.toLocaleString(); }
        function showReveal(b) {
            document.getElementById('reveal-modal').style.display='flex';
            document.getElementById('reveal-img').innerText=b.img;
            document.getElementById('reveal-name').innerText=b.name;
            document.getElementById('reveal-rarity').innerText=b.rarity;
        }
        function tab(id, btn) {
            document.querySelectorAll('.tab').forEach(t => t.style.display='none');
            document.getElementById(id).style.display='block';
            document.querySelectorAll('.nav-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            if(id === 'collection') renderInv();
            if(id === 'trade') renderTradeBlooks();
        }
        function renderInv() {
            document.getElementById('inv-list').innerHTML = data.inventory.map(b => `<div class="card"><div>${b.img}</div><b>${b.name}</b></div>`).join('');
        }
        function init() {}
    </script>
</body>
</html>
